ratingsNew.push({
    'data' : [
        {
            'year'  : '2009',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '207112'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '105552'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '84574'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '58630'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '56785'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '45333'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '34335'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '33718'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '30275'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '30175'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '28489'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '25518'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '244474'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '170870'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '68441'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '67010'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '66304'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '50168'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '40184'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '38771'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '38445'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '33815'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '29935'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '27928'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '27332'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2010',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '213596'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '115615'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '84518'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '61380'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '55611'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '46129'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '35419'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '34821'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '32775'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '32012'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '30910'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '24770'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '249987'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '180146'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '70110'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '68359'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '62673'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '50284'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '44689'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '40726'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '38640'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '35253'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '32426'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '30167'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '27293'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2011',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '221667'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '133682'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '87892'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '64754'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '56750'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '47830'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '36831'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '36103'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '36079'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '34821'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '33918'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '26178'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '264624'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '198688'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '73934'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '72903'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '64862'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '53536'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '52918'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '42630'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '41507'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '38969'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '35133'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '32618'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '29733'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2012',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '226353'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '151600'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '90390'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '66503'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '55751'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '48548'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '37971'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '37715'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '37017'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '36579'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '36487'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '27659'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '25360'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '273675'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '222690'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '76962'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '76895'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '64715'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '57176'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '55568'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '44943'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '43625'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '41953'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '38959'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '35306'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '28756'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2013',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '232715'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '176022'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '92715'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '68582'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '56280'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '50165'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '41414'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '41059'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '38305'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '37918'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '37529'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '30512'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '26402'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '287541'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '255854'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '83612'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '80711'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '67330'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '62706'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '58922'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '48645'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '47649'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '45269'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '42236'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '40392'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '31934'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2014',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '235254'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '203165'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '93792'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '69428'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '54904'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '50198'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '45524'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '41384'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '39345'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '38757'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '37984'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '32225'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '27466'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '292348'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '287079'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '84640'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '83687'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '71793'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '65368'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '60219'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '50528'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '48902'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '46477'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '46035'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '42723'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '36545'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2015',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '254080'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '233240'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '106562'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '74859'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '57126'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '55441'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '54036'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '46640'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '43402'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '43147'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '42985'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '38910'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'Китай',
                            'value' : '301211'
                        },

                        {
                            'title' : 'США',
                            'value' : '291596'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '86559'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '84130'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '76794'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '64079'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '59624'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '51736'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '49113'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '47385'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '45495'
                        },

                        {
                            'title' : 'Австралия',
                            'value' : '44436'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '41834'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2016',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'США',
                            'value' : '259965'
                        },

                        {
                            'title' : 'Китай',
                            'value' : '253667'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '109889'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '76936'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '59715'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '58614'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '55565'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '48233'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '44507'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '43830'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '43823'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '41899'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'Китай',
                            'value' : '317370'
                        },

                        {
                            'title' : 'США',
                            'value' : '289114'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '88686'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '84833'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '77765'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '64284'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '60134'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '53073'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '49372'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '47290'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '47007'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '46977'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2017',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'Китай',
                            'value' : '283626'
                        },

                        {
                            'title' : 'США',
                            'value' : '263035'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '113610'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '78198'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '62247'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '59282'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '55419'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '48326'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '45565'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '44985'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'Китай',
                            'value' : '336552'
                        },

                        {
                            'title' : 'США',
                            'value' : '291982'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '90249'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '85284'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '78459'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '64148'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '60223'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '52978'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '49747'
                        },

                        {
                            'title' : 'Юж. Корея',
                            'value' : '48941'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '48444'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '47007'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : null
                }
            ]
        },

        {
            'year'  : '2018',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : [
                        {
                            'title' : 'Китай',
                            'value' : '324840'
                        },

                        {
                            'title' : 'США',
                            'value' : '266358'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '114669'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '79365'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '65712'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '60089'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '54554'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '49104'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '48053'
                        },

                        {
                            'title' : 'Испания',
                            'value' : '45877'
                        }
                    ]
                },

                {
                    'type'  : 'Scopus',
                    'data'  : [
                        {
                            'title' : 'Китай',
                            'value' : '377693'
                        },

                        {
                            'title' : 'США',
                            'value' : '297847'
                        },

                        {
                            'title' : 'Великобритания',
                            'value' : '94182'
                        },

                        {
                            'title' : 'Германия',
                            'value' : '86192'
                        },

                        {
                            'title' : 'Индия',
                            'value' : '83131'
                        },

                        {
                            'title' : 'Япония',
                            'value' : '64769'
                        },

                        {
                            'title' : 'Франция',
                            'value' : '58888'
                        },

                        {
                            'title' : 'Италия',
                            'value' : '54685'
                        },

                        {
                            'title' : 'Россия',
                            'value' : '52661'
                        },

                        {
                            'title' : 'Канада',
                            'value' : '51717'
                        }
                    ]
                },

                {
                    'type'  : 'forecast',
                    'place' : 11
                }
            ]
        },

        {
            'year'  : '2019',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 11
                }
            ]
        },

        {
            'year'  : '2020',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 11
                }
            ]
        },

        {
            'year'  : '2021',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 10
                }
            ]
        },

        {
            'year'  : '2022',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 8
                }
            ]
        },

        {
            'year'  : '2023',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 6
                }
            ]
        },

        {
            'year'  : '2024',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2025',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2026',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2027',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2028',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2029',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2030',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2031',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2032',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2033',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2034',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        },

        {
            'year'  : '2035',
            'rates' : [
                {
                    'type'  : 'Web of Science',
                    'data'  : null
                },

                {
                    'type'  : 'Scopus',
                    'data'  : null
                },

                {
                    'type'  : 'forecast',
                    'place' : 5
                }
            ]
        }
    ],

    'update' : function(cubeFace, curData) {
        cubeFace.find('.ratings-new-retro-plane-chart-graph').html('');
        cubeFace.find('.ratings-new-retro-plane-chart-labels').html('');
        var faceLabels = [];
        var faceDataActually = [];
        var faceDataForecast = [];

        for (var i = 0; i < curData.length; i++) {
            var curYear = curData[i];
            faceLabels.push(curYear.year);

            var curRates = curYear.rates;
            var curPlaceMin = null;
            for (var j = 0; j < curRates.length; j++) {
                var curRate = curRates[j];
                if (curRate.type == 'forecast') {
                    faceDataForecast.push(curRate.place);
                } else {
                    var curPlace = 0;
                    var hasRussia = false;
                    if (curRate.data != null) {
                        for (var k = 0; k < curRate.data.length; k++) {
                            if (!hasRussia) {
                                curPlace++;
                            }
                            if (curRate.data[k].title == 'Россия') {
                                hasRussia = true;
                            }
                        }
                        if (curPlaceMin == null || curPlaceMin > curPlace) {
                            curPlaceMin = curPlace;
                        }
                    }
                }
            }
            if (curPlaceMin !== null) {
                faceDataActually.push({'year': curYear.year, 'place': curPlaceMin});
            } else {
                faceDataActually.push(null);
            }
        }

        cubeFace.find('.ratings-new-retro-plane-chart').width(faceLabels.length * 79 - 37);

        var minPlace = 9999;
        var maxPlace = 0;
        var curScroll = 0;

        for (var i = 0; i < faceDataActually.length; i++) {
            if (faceDataActually[i] != null) {
                if (faceDataActually[i].place < minPlace) {
                    minPlace = faceDataActually[i].place;
                }
                if (faceDataActually[i].place > maxPlace) {
                    maxPlace = faceDataActually[i].place;
                }
            }
        }

        for (var i = 0; i < faceDataForecast.length; i++) {
            if (faceDataForecast[i] != null) {
                if (faceDataForecast[i] < minPlace) {
                    minPlace = faceDataForecast[i];
                }
                if (faceDataForecast[i] > maxPlace) {
                    maxPlace = faceDataForecast[i];
                }
            }
        }

        function angle_point(a, b, c) {
            var x1 = a[0] - b[0];
            var x2 = c[0] - b[0];
            var y1 = a[1] - b[1];
            var y2 = c[1] - b[1];

            var d1 = Math.sqrt(x1 * x1 + y1 * y1);
            var d2 = Math.sqrt(x2 * x2 + y2 * y2);
            return Math.acos((x1 * x2 + y1 * y2) / (d1 * d2)) * 180 / Math.PI;
        }

        for (var i = 0; i < faceDataActually.length; i++) {
            if (faceDataActually[i] != null) {
                var curX = (i * 79);
                curScroll = curX;
                var curY = ((faceDataActually[i].place - minPlace) / (maxPlace - minPlace)) * cubeFace.find('.ratings-new-retro-plane-chart-graph').height();
                if (faceDataActually[i - 1] != null) {
                    var prevX = ((i - 1) * 79);
                    var prevY = ((faceDataActually[i - 1].place - minPlace) / (maxPlace - minPlace)) * cubeFace.find('.ratings-new-retro-plane-chart-graph').height();
                    var curWidth = Math.sqrt(Math.pow((curX - prevX), 2) + Math.pow((curY - prevY), 2));
                    var curAngle = angle_point([curX, curY], [prevX, prevY], [curX, prevY]);
                    if (curY < prevY) {
                        curAngle = -curAngle;
                    }
                    cubeFace.find('.ratings-new-retro-plane-chart-graph').append('<div class="ratings-new-retro-plane-chart-line active" style="left:' + prevX + 'px; top:' + prevY + 'px; width:' + curWidth + 'px; transform:rotate(' + curAngle + 'deg)"></div>');
                }
                cubeFace.find('.ratings-new-retro-plane-chart-graph').append('<div class="ratings-new-retro-plane-chart-point active" data-year="' + faceDataActually[i].year + '" style="left:' + curX + 'px; top:' + curY + 'px"><span><strong><em>' + faceDataActually[i].place + '</em></strong><em>место</em></span></div>');
            }
        }

        for (var i = 0; i < faceDataForecast.length; i++) {
            if (faceDataForecast[i] != null) {
                var curX = (i * 79);
                var curY = ((faceDataForecast[i] - minPlace) / (maxPlace - minPlace)) * cubeFace.find('.ratings-new-retro-plane-chart-graph').height();
                if (faceDataForecast[i - 1] != null) {
                    var prevX = ((i - 1) * 79);
                    var prevY = ((faceDataForecast[i - 1] - minPlace) / (maxPlace - minPlace)) * cubeFace.find('.ratings-new-retro-plane-chart-graph').height();
                    var curWidth = Math.sqrt(Math.pow((curX - prevX), 2) + Math.pow((curY - prevY), 2));
                    var curAngle = angle_point([curX, curY], [prevX, prevY], [curX, prevY]);
                    if (curY < prevY) {
                        curAngle = -curAngle;
                    }
                    cubeFace.find('.ratings-new-retro-plane-chart-graph').append('<div class="ratings-new-retro-plane-chart-line" style="left:' + prevX + 'px; top:' + prevY + 'px; width:' + curWidth + 'px; transform:rotate(' + curAngle + 'deg)"></div>');
                }
                cubeFace.find('.ratings-new-retro-plane-chart-graph').append('<div class="ratings-new-retro-plane-chart-point" style="left:' + curX + 'px; top:' + curY + 'px"><span><strong>' + faceDataForecast[i] + '</strong>место</span></div>');
            }
        }

        for (var i = 0; i < faceLabels.length; i++) {
            if (faceDataActually[i] != null) {
                cubeFace.find('.ratings-new-retro-plane-chart-labels').append('<div class="ratings-new-retro-plane-chart-year" style="left:' + (i * 79) + 'px"><a href="#" data-year="' + faceLabels[i] + '">' + faceLabels[i] + '</a></div>');
            } else {
                cubeFace.find('.ratings-new-retro-plane-chart-labels').append('<div class="ratings-new-retro-plane-chart-year" style="left:' + (i * 79) + 'px"><span>' + faceLabels[i] + '</span></div>');
            }
        }

        cubeFace.find('.ratings-new-retro-plane-container').mCustomScrollbar({
            axis: 'x',
            setLeft: '-' + (curScroll - cubeFace.find('.ratings-new-retro-plane-container').width() / 2) + 'px',
            scrollButtons: {
                enable: true
            }
        });
        
        cubeFace.find('.ratings-new-retro-plane-chart-year a, .ratings-new-retro-plane-chart-point.active').click(function(e) {
            var curLi = $(this);
            var curYear = $(this).attr('data-year');

            $('html').addClass('window-open');

            if ($('.window').length > 0) {
                $('.window').remove();
            }
            $('body').append('<div class="window window-monitoring"><div class="window-loading"></div></div>');

            var windowData = null;
            var windowType = '';

            for (var i = 0; i < curData.length; i++) {
                var dataItem = curData[i];
                if (dataItem.year == curYear) {

                    var curRates = dataItem.rates;
                    var curPlaceMin = null;
                    for (var j = 0; j < curRates.length; j++) {
                        var curRate = curRates[j];
                        if (curRate.type != 'forecast') {
                            var curPlace = 0;
                            var hasRussia = false;
                            if (curRate.data != null) {
                                for (var k = 0; k < curRate.data.length; k++) {
                                    if (!hasRussia) {
                                        curPlace++;
                                    }
                                    if (curRate.data[k].title == 'Россия') {
                                        hasRussia = true;
                                    }
                                }
                                if (curPlaceMin == null || curPlaceMin > curPlace) {
                                    curPlaceMin = curPlace;
                                    windowType = curRate.type;
                                    windowData = curRate.data;
                                }
                            }
                        }
                    }
                }
            }

            var newHTML = '';
            if (windowData != null) {
                var maxWidthLine = 240;
                if ($(window).width() < 1140) {
                    maxWidthLine = 107;
                }

                var maxValue = 0;
                for (var i = 0; i < windowData.length; i++) {
                    var curValue = Math.round(parseFloat(windowData[i].value.replace(/,/, '.')));
                    if (maxValue < curValue) {
                        maxValue = curValue;
                    }
                }

                var count = 0;
                var hasRussia = false;

                for (var i = 0; i < windowData.length; i++) {
                    var curItem = windowData[i];
                    var curValue = Math.round(parseFloat(curItem.value.replace(/,/, '.')));
                    var curWidth = curValue / maxValue * maxWidthLine + 1;
                    count++;
                    if (curItem.title == 'Россия') {
                        hasRussia = true;
                        if (count > 10) {
                            newHTML += '<div class="ratings-new-priority-item-sep"></div>';
                        }
                    }
                    if (count < 11 || curItem.title == 'Россия') {
                        var flag = '';
                        for (var j = 0; j < ratingsNewFlags.length; j++) {
                            if (ratingsNewFlags[j].country == curItem.title) {
                                flag = ratingsNewFlags[j].image;
                            }
                        }

                        if (count < 11 && curItem.title == 'Россия') {
                            newHTML += '<div class="ratings-new-priority-item-rus"><div class="ratings-new-priority-item-rus-inner">';
                        }

                        newHTML += '<div class="ratings-new-priority-item">' +
                                        '<div class="ratings-new-priority-item-flag"><img src="' + flag + '" alt="" /></div>' +
                                        '<div class="ratings-new-priority-item-title">' + count + '. ' + curItem.title + '</div>' +
                                        '<div class="ratings-new-priority-item-line"><div class="ratings-new-priority-item-line-inner" style="width:' + curWidth + 'px"></div></div>' +
                                        '<div class="ratings-new-priority-item-value">' + String(curItem.value).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g, '$1 ') + '</div>' +
                                   '</div>';

                       if (count < 11 && curItem.title == 'Россия') {
                            newHTML += '</div></div>';
                        }
                    }
                }

            }

            var windowHTML   =  '<div class="window-ratings-new-retro-plane">';
            windowHTML      +=      '<div class="window-ratings-new-retro-plane-title">Топ-10 стран по количеству статей за ' + curYear + ' год, ед.</div>';
            windowHTML      +=      '<div class="window-ratings-new-retro-plane-subtitle">По данным ' + windowType + '</div>';
            windowHTML      +=      '<div class="window-ratings-new-retro-plane-list">' + newHTML + '</div>';
            windowHTML      +=      '<div class="window-ratings-new-retro-plane-footer">' + cubeFace.find('.cube-face-footer').html() + '</div>';
            windowHTML      +=  '</div>';

            $('.window').append('<div class="window-container window-container-load"><div class="window-content">' + windowHTML + '<a href="#" class="window-close"></a></div></div>')

            $('.window-container').removeClass('window-container-load');
            windowPosition();

            e.preventDefault();
        });
    }
});